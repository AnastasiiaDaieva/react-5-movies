{"version":3,"sources":["components/Searchbar/Searchbar.js","views/MovieSearchView.js","components/Container/Container.js","components/List/List.js","services/api.js","components/Container/Container.module.css","components/List/List.module.css","components/Button/Button.js","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","views/MovieSearchView.module.css"],"names":["Searchbar","onSubmit","useState","query","setQuery","useSearchParams","setSearchParams","className","s","e","preventDefault","trim","toast","error","position","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","htmlFor","Searchbar__input","type","name","value","onChange","currentTarget","toLowerCase","id","placeholder","Button","text","MovieSearchView","foundMovies","setFoundMovies","setError","total","setTotal","pageNumber","setPageNumber","loading","setLoading","location","useLocation","useEffect","axios","get","BASE","API_KEY","then","response","array","data","results","total_results","prevList","catch","message","finally","Container","length","List","map","title","poster_path","release_date","overview","Search__item","alt","src","Search__image","Search__description","to","state","from","Search__title","Date","toDateString","Search__overview","onClick","prevPage","children","additionalClass","heading","classProp","module","exports"],"mappings":"2QAOe,SAASA,EAAT,GAAkC,IAAbC,EAAY,EAAZA,SAClC,EAA0BC,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAsCC,cAAtC,mBAAmBC,GAAnB,WAuBA,OACE,mCACE,uBAAMC,UAAWC,IAAER,UAAWC,SAtBb,SAAAQ,GACnBA,EAAEC,iBACmB,KAAjBP,EAAMQ,QAWVL,EAAgB,CAAEH,MAAOA,IACzBF,EAASE,IAXPS,IAAMC,MAAM,wBAAyB,CACnCC,SAAU,YACVC,iBAAiB,EACjBC,cAAc,EACdC,cAAc,EACdC,WAAW,EACXC,cAAUC,KAaZ,UACE,uBAAOC,QAAQ,gBACf,uBACEd,UAAWC,IAAEc,iBACbC,KAAK,OACLC,KAAK,QACLC,MAAOtB,EACPuB,SAZkB,SAAAjB,GACxBL,EAASK,EAAEkB,cAAcF,MAAMG,gBAYzBC,GAAG,cACHC,YAAY,8BAEd,cAACC,EAAA,EAAD,CAAQC,KAAK,SAAST,KAAK,gB,kEC7BpB,SAASU,IACtB,MAA0B/B,mBAAS,IAAnC,mBAAOC,EAAP,KAAcC,EAAd,KACA,EAAsCF,mBAAS,IAA/C,mBAAOgC,EAAP,KAAoBC,EAApB,KACA,EAA0BjC,mBAAS,MAAnC,mBAAckC,GAAd,WACA,EAA0BlC,mBAAS,GAAnC,mBAAOmC,EAAP,KAAcC,EAAd,KACA,EAAoCpC,mBAAS,GAA7C,mBAAOqC,EAAP,KAAmBC,EAAnB,KACA,EAA8BtC,oBAAS,GAAvC,mBAAOuC,EAAP,KAAgBC,EAAhB,KACMC,EAAWC,cAEjBC,qBAAU,WACM,KAAV1C,IAGJuC,GAAW,GAEXtC,EAASD,GACT2C,IACGC,IADH,UAEOC,IAFP,iCAEoCC,IAFpC,iCAEoE9C,EAFpE,iBAEkFoC,EAFlF,yBAIGW,MAAK,SAAAC,GACJ,IAAMC,EAAQD,EAASE,KAAKC,QACtBjB,EAAQc,EAASE,KAAKE,cAC5BpB,GAAe,SAAAqB,GAAQ,4BAAQA,GAAR,YAAqBJ,OAC5Cd,EAASD,MAGVoB,OAAM,SAAA5C,GAAK,OAAIuB,EAASvB,EAAM6C,YAC9BC,SAAQ,kBAAMjB,GAAW,SAE3B,CAACvC,EAAOoC,IAYX,OACE,eAACqB,EAAA,EAAD,WACE,cAAC5D,EAAD,CAAWC,SAZO,SAAAE,GACpBC,EAASD,GACTqC,EAAc,GACdL,EAAe,IACfC,EAAS,SASNK,GAAW,cAAC,IAAD,IAEXP,EAAY2B,OAAS,GACpB,qCACE,wDAAoB1D,EAApB,QACA,cAAC2D,EAAA,EAAD,UACG5B,EAAY6B,KACX,gBAAGC,EAAH,EAAGA,MAAOnC,EAAV,EAAUA,GAAIoC,EAAd,EAAcA,YAAaC,EAA3B,EAA2BA,aAAcC,EAAzC,EAAyCA,SAAzC,OACE,qBAAa5D,UAAWC,IAAE4D,aAA1B,UACE,qBACEC,IAAKL,EACLM,IAAG,0CAAqCL,GACxC1D,UAAWC,IAAE+D,gBAEf,sBAAKhE,UAAWC,IAAEgE,oBAAlB,UACE,cAAC,IAAD,CACEC,GAAE,kBAAa5C,GACf6C,MAAO,CAAEC,KAAMhC,GACfpC,UAAWC,IAAEoE,cAHf,SAKE,6BAAKZ,MAEP,kCAAK,IAAIa,KAAKX,GAAcY,kBAC5B,mBAAGvE,UAAWC,IAAEuE,iBAAhB,SAAmCZ,SAf9BtC,WAuBlBQ,EAAQ,IAAM,cAACN,EAAA,EAAD,CAAQC,KAAK,YAAYgD,QArC3B,WACfxC,GAAc,SAAAyC,GAAQ,OAAIA,EAAW,QAqCX,IAAvB/C,EAAY2B,QAAgB1D,GAC3B,wDAA2BA,U,gCC9FnC,8DAEe,SAASyD,EAAT,GAAmD,IAA9BsB,EAA6B,EAA7BA,SAAUC,EAAmB,EAAnBA,gBAC5C,OACE,qBAAK5E,UAAS,UAAK4E,EAAL,aAAyB3E,IAAEoD,UAA3B,KAAd,SAAwDsB,M,gCCJ5D,8DAEe,SAASpB,EAAT,GAKX,IAJFoB,EAIC,EAJDA,SACAE,EAGC,EAHDA,QACAD,EAEC,EAFDA,gBACAE,EACC,EADDA,UAEA,OACE,qCACE,oBAAI9E,UAAW8E,EAAf,SAA2BD,IAC3B,oBAAI7E,UAAS,UAAKC,IAAEsD,KAAP,aAAgBqB,GAA7B,SAAiDD,S,oHCX1CjC,EAAU,mCACVD,EAAO,gC,mBCApBsC,EAAOC,QAAU,CAAC,UAAY,+B,mBCA9BD,EAAOC,QAAU,CAAC,KAAO,qB,gCCDzB,8DAEe,SAASxD,EAAT,GAAoD,IAAlCR,EAAiC,EAAjCA,KAAMS,EAA2B,EAA3BA,KAAMgD,EAAqB,EAArBA,QAASE,EAAY,EAAZA,SACpD,OACE,yBAAQ3E,UAAWC,IAAEuB,OAAQR,KAAMA,EAAMyD,QAASA,EAAlD,UACGhD,EADH,IACUkD,O,mBCJdI,EAAOC,QAAU,CAAC,OAAS,yB,mBCA3BD,EAAOC,QAAU,CAAC,UAAY,6BAA6B,iBAAmB,sC,mBCA9ED,EAAOC,QAAU,CAAC,aAAe,iEAAiE,cAAgB,mEAAmE,oBAAsB,+EAA+E,cAAgB,mEAAmE,iBAAmB","file":"static/js/search-view.51b3f79f.chunk.js","sourcesContent":["import Button from 'components/Button/Button';\nimport { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useSearchParams } from 'react-router-dom';\nimport s from 'components/Searchbar/Searchbar.module.css';\n\nexport default function Searchbar({ onSubmit }) {\n  const [query, setQuery] = useState('');\n  let [searchParams, setSearchParams] = useSearchParams();\n  // console.log(searchParams.get('query'));\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (query.trim() === '') {\n      toast.error('Please type the query', {\n        position: 'top-right',\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n      return;\n    }\n    setSearchParams({ query: query });\n    onSubmit(query);\n  };\n\n  const handleQueryChange = e => {\n    setQuery(e.currentTarget.value.toLowerCase());\n  };\n  return (\n    <>\n      <form className={s.Searchbar} onSubmit={handleSubmit}>\n        <label htmlFor=\"inputSearch\"></label>\n        <input\n          className={s.Searchbar__input}\n          type=\"text\"\n          name=\"query\"\n          value={query}\n          onChange={handleQueryChange}\n          id=\"inputSearch\"\n          placeholder=\"Please type a movie title\"\n        />\n        <Button text=\"Search\" type=\"submit\" />\n      </form>\n    </>\n  );\n}\n","// searchbar\n// button\n\nimport axios from 'axios';\n\nimport Searchbar from 'components/Searchbar/Searchbar';\nimport { useState, useEffect } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport List from 'components/List/List';\nimport Loading from 'components/Loader/Loader';\nimport Button from 'components/Button/Button';\nimport Container from 'components/Container/Container';\nimport { API_KEY, BASE } from 'services/api';\nimport s from 'views/MovieSearchView.module.css';\nimport { format } from 'prettier';\n\nexport default function MovieSearchView() {\n  const [query, setQuery] = useState('');\n  const [foundMovies, setFoundMovies] = useState([]);\n  const [error, setError] = useState(null);\n  const [total, setTotal] = useState(0);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const location = useLocation();\n\n  useEffect(() => {\n    if (query === '') {\n      return;\n    }\n    setLoading(true);\n\n    setQuery(query);\n    axios\n      .get(\n        `${BASE}/search/movie?api_key=${API_KEY}&language=en-US&query=${query}&page=${pageNumber}&include_adult=false`,\n      )\n      .then(response => {\n        const array = response.data.results;\n        const total = response.data.total_results;\n        setFoundMovies(prevList => [...prevList, ...array]);\n        setTotal(total);\n        // console.log(response);\n      })\n      .catch(error => setError(error.message))\n      .finally(() => setLoading(false));\n    // console.log(foundMovies);\n  }, [query, pageNumber]);\n\n  const onQueryChange = query => {\n    setQuery(query);\n    setPageNumber(1);\n    setFoundMovies([]);\n    setError(null);\n  };\n\n  const loadMore = () => {\n    setPageNumber(prevPage => prevPage + 1);\n  };\n  return (\n    <Container>\n      <Searchbar onSubmit={onQueryChange} />\n      {loading && <Loading />}\n\n      {foundMovies.length > 0 && (\n        <>\n          <h2>Results on {`\"${query}\"`}</h2>\n          <List>\n            {foundMovies.map(\n              ({ title, id, poster_path, release_date, overview }) => (\n                <li key={id} className={s.Search__item}>\n                  <img\n                    alt={title}\n                    src={`https://image.tmdb.org/t/p/w500/${poster_path}`}\n                    className={s.Search__image}\n                  />\n                  <div className={s.Search__description}>\n                    <Link\n                      to={`/movies/${id}`}\n                      state={{ from: location }}\n                      className={s.Search__title}\n                    >\n                      <h2>{title}</h2>\n                    </Link>\n                    <p> {new Date(release_date).toDateString()}</p>\n                    <p className={s.Search__overview}>{overview}</p>\n                  </div>\n                </li>\n              ),\n            )}\n          </List>\n        </>\n      )}\n      {total > 20 && <Button text=\"Load More\" onClick={loadMore} />}\n      {foundMovies.length === 0 && query && (\n        <div>Nothing was found on {query}</div>\n      )}\n    </Container>\n  );\n}\n","import s from 'components/Container/Container.module.css';\n\nexport default function Container({ children, additionalClass }) {\n  return (\n    <div className={`${additionalClass}, ${s.Container} `}>{children}</div>\n  );\n}\n","import s from 'components/List/List.module.css';\n\nexport default function List({\n  children,\n  heading,\n  additionalClass,\n  classProp,\n}) {\n  return (\n    <>\n      <h2 className={classProp}>{heading}</h2>\n      <ul className={`${s.List}, ${additionalClass}`}>{children}</ul>\n    </>\n  );\n}\n","export const API_KEY = '6fc149a4cf08bb260c2094f65b6f8095';\nexport const BASE = 'https://api.themoviedb.org/3';\n\nexport async function fetchMovies(value, page) {\n  return await fetch(`${BASE}/search/movie?api_key=${API_KEY}&query=${value}`)\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n    })\n    .then(data => data);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Container_Container__RbBaM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"List\":\"List_List__21E3Q\"};","import s from 'components/Button/Button.module.css';\n\nexport default function Button({ type, text, onClick, children }) {\n  return (\n    <button className={s.Button} type={type} onClick={onClick}>\n      {text} {children}\n    </button>\n  );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2wZpR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3OVSN\",\"Searchbar__input\":\"Searchbar_Searchbar__input__3Tr_B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Search__item\":\"MovieSearchView_Search__item__2Xqa- HomeView_Home__item__263oX\",\"Search__image\":\"MovieSearchView_Search__image__1ZPU6 HomeView_Home__image__skJiW\",\"Search__description\":\"MovieSearchView_Search__description__2c_VD HomeView_Home__description__3r3-y\",\"Search__title\":\"MovieSearchView_Search__title__tJiAO HomeView_Home__title__1iBkE\",\"Search__overview\":\"MovieSearchView_Search__overview__1uJpn HomeView_Home__overview__1-KNm\"};"],"sourceRoot":""}