{"version":3,"sources":["components/Container/Container.js","components/List/List.js","components/List/List.module.css","services/api.js","components/Container/Container.module.css","components/Button/Button.js","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","views/MovieSearchView.module.css","components/Searchbar/Searchbar.js","views/MovieSearchView.js"],"names":["Container","children","additionalClass","className","s","List","heading","classProp","module","exports","API_KEY","BASE","Button","type","text","onClick","Searchbar","onSubmit","useState","query","setQuery","useSearchParams","setSearchParams","e","preventDefault","trim","toast","error","position","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","htmlFor","Searchbar__input","name","value","onChange","currentTarget","toLowerCase","id","placeholder","MovieSearchView","foundMovies","setFoundMovies","setError","total","setTotal","pageNumber","setPageNumber","loading","setLoading","location","useLocation","useEffect","axios","get","then","response","array","data","results","total_results","prevList","catch","message","finally","length","map","title","poster_path","release_date","overview","Search__item","alt","src","Search__image","Search__description","to","state","from","Search__title","Date","toDateString","Search__overview","prevPage"],"mappings":"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","file":"static/js/search-view.310391cb.chunk.js","sourcesContent":["import s from 'components/Container/Container.module.css';\n\nimport PropTypes from 'prop-types';\n\nexport default function Container({ children, additionalClass }) {\n  return (\n    <div className={`${additionalClass}, ${s.Container} `}>{children}</div>\n  );\n}\n\nContainer.propTypes = {\n  children: PropTypes.any,\n  additionalClass: PropTypes.string,\n};\n","import s from 'components/List/List.module.css';\n\nimport PropTypes from 'prop-types';\n\nexport default function List({\n  children,\n  heading,\n  additionalClass,\n  classProp,\n}) {\n  return (\n    <>\n      <h2 className={classProp}>{heading}</h2>\n      <ul className={`${s.List}, ${additionalClass}`}>{children}</ul>\n    </>\n  );\n}\n\nList.propTypes = {\n  children: PropTypes.any,\n  heading: PropTypes.string,\n  additionalClass: PropTypes.string,\n  classProp: PropTypes.string,\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"List\":\"List_List__21E3Q\"};","export const API_KEY = '6fc149a4cf08bb260c2094f65b6f8095';\nexport const BASE = 'https://api.themoviedb.org/3';\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Container_Container__RbBaM\"};","import s from 'components/Button/Button.module.css';\n\nimport PropTypes from 'prop-types';\n\nexport default function Button({ type, text, onClick, children }) {\n  return (\n    <button className={s.Button} type={type} onClick={onClick}>\n      {text} {children}\n    </button>\n  );\n}\n\nButton.propTypes = {\n  type: PropTypes.string,\n  text: PropTypes.string,\n  onClick: PropTypes.func,\n  children: PropTypes.any,\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2wZpR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3OVSN\",\"Searchbar__input\":\"Searchbar_Searchbar__input__3Tr_B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Search__item\":\"MovieSearchView_Search__item__2Xqa- HomeView_Home__item__263oX\",\"Search__image\":\"MovieSearchView_Search__image__1ZPU6 HomeView_Home__image__skJiW\",\"Search__description\":\"MovieSearchView_Search__description__2c_VD HomeView_Home__description__3r3-y\",\"Search__title\":\"MovieSearchView_Search__title__tJiAO HomeView_Home__title__1iBkE\",\"Search__overview\":\"MovieSearchView_Search__overview__1uJpn HomeView_Home__overview__1-KNm\"};","import { useState } from 'react';\nimport { useSearchParams } from 'react-router-dom';\n\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\n\nimport Button from 'components/Button/Button';\n\nimport s from 'components/Searchbar/Searchbar.module.css';\n\nimport PropTypes from 'prop-types';\n\nexport default function Searchbar({ onSubmit }) {\n  const [query, setQuery] = useState('');\n  let [searchParams, setSearchParams] = useSearchParams();\n  // console.log(searchParams.get('query'));\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (query.trim() === '') {\n      toast.error('Please type the query', {\n        position: 'top-right',\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n      return;\n    }\n    setSearchParams({ query: query });\n    onSubmit(query);\n  };\n\n  const handleQueryChange = e => {\n    setQuery(e.currentTarget.value.toLowerCase());\n  };\n  return (\n    <>\n      <form className={s.Searchbar} onSubmit={handleSubmit}>\n        <label htmlFor=\"inputSearch\"></label>\n        <input\n          className={s.Searchbar__input}\n          type=\"text\"\n          name=\"query\"\n          value={query}\n          onChange={handleQueryChange}\n          id=\"inputSearch\"\n          placeholder=\"Please type a movie title\"\n        />\n        <Button text=\"Search\" type=\"submit\" />\n      </form>\n    </>\n  );\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func,\n};\n","import axios from 'axios';\nimport { API_KEY, BASE } from 'services/api';\n\nimport { useState, useEffect } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\n\nimport Searchbar from 'components/Searchbar/Searchbar';\nimport List from 'components/List/List';\nimport Loading from 'components/Loader/Loader';\nimport Button from 'components/Button/Button';\nimport Container from 'components/Container/Container';\n\nimport s from 'views/MovieSearchView.module.css';\n\nexport default function MovieSearchView() {\n  const [query, setQuery] = useState('');\n  const [foundMovies, setFoundMovies] = useState([]);\n  const [error, setError] = useState(null);\n  const [total, setTotal] = useState(0);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [loading, setLoading] = useState(false);\n  const location = useLocation();\n\n  useEffect(() => {\n    if (query === '') {\n      return;\n    }\n    setLoading(true);\n\n    setQuery(query);\n    axios\n      .get(\n        `${BASE}/search/movie?api_key=${API_KEY}&language=en-US&query=${query}&page=${pageNumber}&include_adult=false`,\n      )\n      .then(response => {\n        const array = response.data.results;\n        const total = response.data.total_results;\n        setFoundMovies(prevList => [...prevList, ...array]);\n        setTotal(total);\n        // console.log(response);\n      })\n      .catch(error => setError(error.message))\n      .finally(() => setLoading(false));\n    // console.log(foundMovies);\n  }, [query, pageNumber]);\n\n  const onQueryChange = query => {\n    setQuery(query);\n    setPageNumber(1);\n    setFoundMovies([]);\n    setError(null);\n  };\n\n  const loadMore = () => {\n    setPageNumber(prevPage => prevPage + 1);\n  };\n  return (\n    <Container>\n      <Searchbar onSubmit={onQueryChange} />\n      {loading && <Loading />}\n\n      {foundMovies.length > 0 && (\n        <>\n          <h2>Results on {`\"${query}\"`}</h2>\n          <List>\n            {foundMovies.map(\n              ({ title, id, poster_path, release_date, overview }) => (\n                <li key={id} className={s.Search__item}>\n                  <img\n                    alt={title}\n                    src={`https://image.tmdb.org/t/p/w500/${poster_path}`}\n                    className={s.Search__image}\n                  />\n                  <div className={s.Search__description}>\n                    <Link\n                      to={`/movies/${id}`}\n                      state={{ from: location }}\n                      className={s.Search__title}\n                    >\n                      <h2>{title}</h2>\n                    </Link>\n                    <p> {new Date(release_date).toDateString()}</p>\n                    <p className={s.Search__overview}>{overview}</p>\n                  </div>\n                </li>\n              ),\n            )}\n          </List>\n        </>\n      )}\n      {total > 20 && <Button text=\"Load More\" onClick={loadMore} />}\n      {foundMovies.length === 0 && query && (\n        <div>Nothing was found on {query}</div>\n      )}\n    </Container>\n  );\n}\n"],"sourceRoot":""}