{"version":3,"sources":["components/Container/Container.js","components/List/List.js","services/api.js","components/Container/Container.module.css","components/List/List.module.css","components/Button/Button.js","components/Button/Button.module.css","components/Searchbar/Searchbar.module.css","views/MovieSearchView.module.css","components/Searchbar/Searchbar.js","views/MovieSearchView.js"],"names":["Container","children","additionalClass","className","s","List","heading","API_KEY","BASE","module","exports","Button","type","text","onClick","Searchbar","onSubmit","useState","query","setQuery","useSearchParams","searchParams","setSearchParams","console","log","get","e","preventDefault","trim","toast","error","position","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","htmlFor","Searchbar__input","name","value","onChange","currentTarget","toLowerCase","id","MovieSearchView","foundMovies","setFoundMovies","setError","total","setTotal","pageNumber","setPageNumber","loading","setLoading","useLocation","useEffect","axios","then","response","array","data","results","total_results","prevList","catch","message","finally","window","sessionStorage","setItem","JSON","stringify","searchQuery","searchDetails","length","map","title","poster_path","release_date","overview","Search__item","alt","src","Search__image","Search__description","to","Search__title","Date","toDateString","Search__overview","prevPage"],"mappings":"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","file":"static/js/search-view.d9bcaa9f.chunk.js","sourcesContent":["import s from 'components/Container/Container.module.css';\n\nexport default function Container({ children, additionalClass }) {\n  return (\n    <div className={`${additionalClass}, ${s.Container} `}>{children}</div>\n  );\n}\n","import s from 'components/List/List.module.css';\n\nexport default function List({ children, heading, additionalClass }) {\n  return (\n    <>\n      <h2>{heading}</h2>\n      <ul className={`${s.List}, ${additionalClass}`}>{children}</ul>\n    </>\n  );\n}\n","export const API_KEY = '6fc149a4cf08bb260c2094f65b6f8095';\nexport const BASE = 'https://api.themoviedb.org/3';\n\nexport async function fetchMovies(value, page) {\n  return await fetch(`${BASE}/search/movie?api_key=${API_KEY}&query=${value}`)\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n    })\n    .then(data => data);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Container\":\"Container_Container__RbBaM\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"List\":\"List_List__21E3Q\"};","import s from 'components/Button/Button.module.css';\n\nexport default function Button({ type, text, onClick, children }) {\n  return (\n    <button className={s.Button} type={type} onClick={onClick}>\n      {text} {children}\n    </button>\n  );\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__2wZpR\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__3OVSN\",\"Searchbar__input\":\"Searchbar_Searchbar__input__3Tr_B\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Search__item\":\"MovieSearchView_Search__item__2Xqa- HomeView_Home__item__263oX\",\"Search__image\":\"MovieSearchView_Search__image__1ZPU6 HomeView_Home__image__skJiW\",\"Search__description\":\"MovieSearchView_Search__description__2c_VD HomeView_Home__description__3r3-y\",\"Search__title\":\"MovieSearchView_Search__title__tJiAO HomeView_Home__title__1iBkE\",\"Search__overview\":\"MovieSearchView_Search__overview__1uJpn HomeView_Home__overview__1-KNm\"};","import Button from 'components/Button/Button';\nimport { useState } from 'react';\nimport { toast } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport { useSearchParams } from 'react-router-dom';\nimport s from 'components/Searchbar/Searchbar.module.css';\n\nexport default function Searchbar({ onSubmit }) {\n  const [query, setQuery] = useState('');\n  let [searchParams, setSearchParams] = useSearchParams();\n  console.log(searchParams.get('query'));\n\n  const handleSubmit = e => {\n    e.preventDefault();\n    if (query.trim() === '') {\n      toast.error('Please type the query', {\n        position: 'top-right',\n        hideProgressBar: false,\n        closeOnClick: true,\n        pauseOnHover: true,\n        draggable: true,\n        progress: undefined,\n      });\n      return;\n    }\n    setSearchParams({ query: query });\n    onSubmit(query);\n  };\n\n  const handleQueryChange = e => {\n    setQuery(e.currentTarget.value.toLowerCase());\n  };\n  return (\n    <>\n      <form className={s.Searchbar} onSubmit={handleSubmit}>\n        <label htmlFor=\"inputSearch\"></label>\n        <input\n          className={s.Searchbar__input}\n          type=\"text\"\n          name=\"query\"\n          value={query}\n          onChange={handleQueryChange}\n          id=\"inputSearch\"\n        />\n        <Button text=\"Search\" type=\"submit\" />\n      </form>\n    </>\n  );\n}\n","// searchbar\n// button\n\nimport axios from 'axios';\n\nimport Searchbar from 'components/Searchbar/Searchbar';\nimport { useState, useEffect } from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport List from 'components/List/List';\nimport Loading from 'components/Loader/Loader';\nimport Button from 'components/Button/Button';\nimport Container from 'components/Container/Container';\nimport { API_KEY, BASE } from 'services/api';\nimport s from 'views/MovieSearchView.module.css';\n\nexport default function MovieSearchView() {\n  const [query, setQuery] = useState('');\n  const [foundMovies, setFoundMovies] = useState([]);\n  const [error, setError] = useState(null);\n  const [total, setTotal] = useState(0);\n  const [pageNumber, setPageNumber] = useState(1);\n  const [loading, setLoading] = useState(false);\n  let location = useLocation();\n\n  useEffect(() => {\n    if (query === '') {\n      return;\n    }\n    setLoading(true);\n\n    setQuery(query);\n    axios\n      .get(\n        `${BASE}/search/movie?api_key=${API_KEY}&language=en-US&query=${query}&page=${pageNumber}&include_adult=false`,\n      )\n      .then(response => {\n        const array = response.data.results;\n        const total = response.data.total_results;\n        setFoundMovies(prevList => [...prevList, ...array]);\n        setTotal(total);\n        // console.log(response);\n      })\n      .catch(error => setError(error.message))\n      .finally(() => setLoading(false));\n    // console.log(foundMovies);\n  }, [query, pageNumber]);\n\n  useEffect(() => {\n    window.sessionStorage.setItem(\n      'searchDetails',\n      JSON.stringify({\n        searchQuery: query,\n        searchDetails: foundMovies,\n      }),\n    );\n  }, [foundMovies]);\n\n  const onQueryChange = query => {\n    setQuery(query);\n    setPageNumber(1);\n    setFoundMovies([]);\n    setError(null);\n  };\n\n  const loadMore = () => {\n    setPageNumber(prevPage => prevPage + 1);\n  };\n  return (\n    <Container>\n      <Searchbar onSubmit={onQueryChange} />\n      {loading && <Loading />}\n\n      {foundMovies.length > 0 && (\n        <>\n          <h2>Results on {`\"${query}\"`}</h2>\n          <List>\n            {foundMovies.map(\n              ({ title, id, poster_path, release_date, overview }) => (\n                <li key={id} className={s.Search__item}>\n                  <img\n                    alt={title}\n                    src={`https://image.tmdb.org/t/p/w500/${poster_path}`}\n                    className={s.Search__image}\n                  />\n                  <div className={s.Search__description}>\n                    <Link to={`/movies/${id}`} className={s.Search__title}>\n                      <h2>{title}</h2>\n                    </Link>\n                    <p> {new Date(release_date).toDateString()}</p>\n                    <p className={s.Search__overview}>{overview}</p>\n                  </div>\n                </li>\n              ),\n            )}\n          </List>\n        </>\n      )}\n      {total > 20 && <Button text=\"Load More\" onClick={loadMore} />}\n      {foundMovies.length === 0 && query && (\n        <div>Nothing was found on {query}</div>\n      )}\n    </Container>\n  );\n}\n"],"sourceRoot":""}